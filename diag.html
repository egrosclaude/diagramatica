<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js">
</script>
</head>
<body>
<div>
<svg width="100%" height="100%"></svg>
</div>
<script>
svg = Snap("svg");
svg.attr({ viewBox: '0 0 500 500' });


var box_attrs = {
	stroke: 'gray',
	strokeWidth: 1,
	fill: 'white',
	rx: 1,
	ry: 1,
};
var text_attrs = { 
	fontSize: '10', 
	fontFamily : 'Helvetica',
	textAnchor: 'start',
	dominantBaseline: 'baseline', 
	alignmentBaseline: 'hanging', 
};

 	
var tbox = function(t, ta, ba) {
	ta = ta || text_attrs;
	ba = ba || box_attrs;
	var rect = svg.rect().attr(ba);
	var text = svg.text(2, 3, t).attr(ta);
	rect.attr({x: 0, y: 0, width: text.getBBox().w + 3, height: text.getBBox().h + 3});
	return svg.g(rect, text);
}

var box = function(t, x, y, v) {
	return tbox(t).transform("T" + x +"," + y + "S" + v);
}
	
svg.rect(0,0,500,500,1).attr(box_attrs);

box("Hola", 100,100,4).drag();
box("Mundo", 200,200,6).drag();
box("Un cartelito", 250,250,2);

console.log(svg.toString());
</script>
</body>
</html>
